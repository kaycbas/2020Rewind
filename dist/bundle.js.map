{"version":3,"sources":["webpack://trend_tracker/./src/util.js","webpack://trend_tracker/webpack/bootstrap","webpack://trend_tracker/./src/index.js"],"names":["daysOfYear","d","Date","setDate","getDate","year","getFullYear","month","getMonth","day","formattedDate","join","push","module","exports","require","anychart","onDocumentReady","map","removeAllListeners","allData","states","dataSet","data","set","series","choropleth","labels","fontColor","fontSize","fontFamily","fontWeight","offsetY","connectorStroke","color","thickness","padding","hAlign","overlapMode","geoIdField","background","fill","stroke","colorScale","scales","ordinalColor","from","to","hovered","geoData","maps","container","draw","addEventListeners","getMonthDayStr","date","toLocaleString","getUTCDate","concat","slider","document","querySelector","playButton","volumeButton","infoButton","infoModal","closeButton","sourcesButton","sources","monthDayLabel","yearLabel","replace","playing","innerText","addEventListener","style","display","oninput","updateState","onchange","timestamp","Math","floor","value","currentTime","playInterval","play","val","Number","credits","main","classList","add","setInterval","pause","clearInterval","audio","contains","remove","muted"],"mappings":"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","file":"bundle.js","sourcesContent":["// Create formatted daysOfYear array\nlet daysOfYear = [];\nfor (let d = new Date(2020, 0, 1); d <= new Date(2020, 11, 31); d.setDate(d.getDate() + 1)) {\n    let year = d.getFullYear();\n    let month = d.getMonth() + 1;\n    let day = d.getDate();\n    let formattedDate = [year, month, day].join('-');\n    daysOfYear.push(formattedDate);\n}\n\nmodule.exports = {\n    daysOfYear,\n}\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const {\n  daysOfYear\n} = require('./util');\n\nanychart.onDocumentReady(() => {\n\n  // create map\n  let map = anychart.map();\n  map.removeAllListeners();\n\n  let allData = require('../assets/data/trends_2020.json');\n  let states = allData[\"2020-1-1\"];\n\n  // create data set\n  let dataSet = anychart.data.set(states);\n\n  // create choropleth series\n  series = map.choropleth(dataSet);\n\n  // enable labels\n  series.labels(true);\n  labels = series.labels();\n\n  // configure label settings\n  labels.fontColor('white');\n  labels.fontSize(\"14px\");\n  labels.fontFamily('Roboto');\n  labels.fontWeight('bold');\n  labels.offsetY(-10);\n  labels.connectorStroke({\n    color: '#DCDCDC',\n    thickness: 2\n  });\n  labels.padding(6);\n  labels.hAlign('center')\n  map.overlapMode(true);\n\n  series.geoIdField('id');\n\n  // set map color settings\n  map.background().fill('#1b262c')\n  series.stroke(\"#1b262c\");\n  series.colorScale(anychart.scales.ordinalColor([{\n      from: 0,\n      to: 9,\n      color: '#F94144'\n    },\n    {\n      from: 10,\n      to: 19,\n      color: '#F3722C'\n    },\n    {\n      from: 20,\n      to: 29,\n      color: '#F7B926'\n    },\n    {\n      from: 30,\n      to: 39,\n      color: '#90BE6D'\n    },\n    {\n      from: 40,\n      to: 49,\n      color: '#43AA8B'\n    },\n    {\n      from: 50,\n      to: 59,\n      color: '#4D908E'\n    },\n    {\n      from: 60,\n      to: 69,\n      color: '#577590'\n    },\n    {\n      from: 70,\n      to: 70,\n      color: '#277DA1'\n    },\n    {\n      from: 80,\n      to: 90,\n      color: '#8F43AB'\n    }\n  ]));\n  series.hovered().fill('#577590');\n\n  map.geoData(anychart.maps['united_states_of_america']);\n\n  map.container('container');\n\n  map.draw();\n\n  addEventListeners(allData, dataSet);\n});\n\nconst getMonthDayStr = (date) => {\n  let month = date.toLocaleString('default', {\n    month: 'short'\n  });\n  let day = date.getUTCDate();\n  return month.concat(' ', day, ', ');\n}\n\nconst addEventListeners = (allData, dataSet) => {\n  let slider = document.querySelector(\".rs-range\");\n  let playButton = document.querySelector('.play-button');\n  let volumeButton = document.querySelector('.volume');\n  let infoButton = document.querySelector('.fa-info-circle');\n  let infoModal = document.querySelector('.info-modal');\n  let closeButton = document.querySelector('.fa-times-circle');\n  let sourcesButton = document.querySelector('.sources-btn');\n  let sources = document.querySelector('.sources');\n  let monthDayLabel = document.querySelector('.month-day');\n  let yearLabel = document.querySelector('.year');\n\n  let date = new Date(daysOfYear[0].replace(/-/g, \"/\"));\n\n  let playing = false;\n\n  monthDayLabel.innerText = getMonthDayStr(date);\n  yearLabel.innerText = date.getFullYear();\n\n  infoButton.addEventListener('click', () => {\n    if (infoModal.style.display === \"block\") {\n      infoModal.style.display = \"none\";\n    } else {\n      infoModal.style.display = \"block\";\n    }\n    sources.style.display = \"none\";\n  })\n\n  sourcesButton.addEventListener('click', () => {\n    if (sources.style.display === \"block\") {\n      sources.style.display = \"none\";\n    } else {\n      sources.style.display = \"block\";\n    }\n  })\n\n  closeButton.addEventListener('click', () => {\n    infoModal.style.display = \"none\";\n  })\n\n  slider.oninput = () => {\n    updateState();\n  }\n\n  slider.onchange = () => {\n    const timestamp = Math.floor((slider.value / 365) * 182)\n    document.querySelector('#audio').currentTime = timestamp;\n  }\n\n  let playInterval;\n  playButton.addEventListener('click', () => {\n    const play = () => {\n      if (slider.value < 365) {\n        let val = Number(slider.value);\n        slider.value = val + 1;\n        updateState();\n      } else {\n        let credits = document.querySelector('.credits');\n        let main = document.querySelector('.main');\n        credits.classList.add('visible');\n        main.classList.add('invisible');\n      }\n    }\n    if (!playing) {\n      play();\n      document.querySelector('#audio').play();\n      playInterval = setInterval(() => play(), 500);\n      playing = true;\n    } else {\n      document.querySelector('#audio').pause();\n      clearInterval(playInterval);\n      playing = false;\n    }\n  })\n\n  const updateState = () => {\n    dataSet.data(allData[daysOfYear[slider.value]])\n    let date = new Date(daysOfYear[slider.value].replace(/-/g, \"/\"));\n    monthDayLabel.innerText = getMonthDayStr(date);\n    yearLabel.innerText = date.getFullYear();\n  }\n\n  volumeButton.addEventListener('click', () => {\n    let audio = document.querySelector('#audio');\n\n    if (volumeButton.classList.contains('muted')) {\n      volumeButton.classList.remove('muted');\n      audio.muted = false;\n    } else {\n      volumeButton.classList.add('muted');\n      audio.muted = true;\n    }\n  })\n}"],"sourceRoot":""}